!function(a){a.fn.numberInput=function(e){function t(t){var l,n=a(t),c=a.metadata?a.extend({},e,n.metadata()):e;l=c.main_cell?a(c.main_cell,n):n;var r=l.attr(c.max_attr),u=l.attr(c.min_attr),m=parseInt(l.val());if(i(n,l,r,u),s(n,l,m,r,u),c.minus_cell){var o=a(c.minus_cell,n);o.click(function(){var e=parseInt(l.val())-c.step;return(!a.isNumeric(u)||e>=u)&&(l.val(e),s(n,l,e,r,u)),!1})}if(c.incr_cell){var p=a(c.incr_cell,n);p.click(function(){var e=parseInt(l.val())+c.step;return(!a.isNumeric(r)||r>=e)&&(l.val(e),s(n,l,e,r,u)),!1})}}function i(e,t,i,l){t.keydown(function(a){var e=parseInt(a.keyCode);return e>=96&&105>=e||e>=48&&57>=e||8==e?!0:!1}).bind("paste",function(){var e=a(this).val();"0"!=e&&a(this).val(e.replace(/\D|^0/g,""))}).blur(function(){var n=a(this).val();n="0"!=n?parseInt(n.replace(/\D|^0/g,"")):0,a.isNumeric(i)&&n>i?n=i:a.isNumeric(l)&&l>n&&(n=l),a(this).val(n),s(e,t,n,i,l)}).css("imeMode","disabled").attr("autocomplete","off"),a.isNumeric(i)&&i.length>0&&t.attr("maxlength",i.length)}function s(e,t,i,s,l){if($opts.minus_cell){var n=a($opts.minus_cell,e);a.isNumeric(l)&&l>=i&&n.addClass($opts.disable_calss),a.isNumeric(l)&&i>l&&n.removeClass($opts.disable_calss)}if($opts.incr_cell){var c=a($opts.incr_cell,e);a.isNumeric(s)&&i>=s&&c.addClass($opts.disable_calss),a.isNumeric(s)&&s>i&&c.removeClass($opts.disable_calss)}$opts.callback&&$opts.callback(t,i)}var e=a.extend({},a.fn.numberInput.defaults,e);return this.each(function(){t(this)})},a.fn.numberInput.defaults={max_attr:"max",min_attr:"min",main_cell:"input",minus_cell:".minus",incr_cell:".incr",disable_calss:"disabled",callback:0,step:1}}(jQuery);